name: Quant Bot Scheduler (30min)

on:
  schedule:
    # UTC 기준 시간 설정 (한국 시간 -9시간)
    # 한국 09:00 ~ 15:30 동안 30분마다 실행
    # UTC 00:00 ~ 06:30
    - cron: '*/30 0-6 * * 1-5'  # 월~금, 0시~6시 사이 매 30분마다
    
  workflow_dispatch: # 수동 실행 버튼

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: Install dependencies
      run: |
        pip install pandas finance-datareader requests pykrx beautifulsoup4 lxml

    - name: Run Trading Bot
      env:
        TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
        CHAT_ID: ${{ secrets.CHAT_ID }}
      run: python daily_bot.py
